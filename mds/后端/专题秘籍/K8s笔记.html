<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>K8s笔记 | Forest's Blog</title>
    <meta name="description" content="容器编排k8s最佳实践kubernetes+Rancher2.x笔记为什么要学习容器编排调度Kubernetes 多数互联网公司里面用的技术，实现跨主机多容器编排调度管理的最佳技术之一  可以实现服务注册发现、DevOps自动部署和回滚，能够自动实现请求的负载均衡分配网络流量  在多数互联网公...">
    <meta name="generator" content="VitePress v1.0.0-rc.39">
    <link rel="preload stylesheet" href="/assets/style.7us3DWBg.css" as="style">
    
    <script type="module" src="/assets/app.vTJx1qFr.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.OnJFW6H1.js">
    <link rel="modulepreload" href="/assets/chunks/theme.9-7wXBuP.js">
    <link rel="modulepreload" href="/assets/mds_后端_专题秘籍_K8s笔记.md.G39pp6BN.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5a346dfe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5a346dfe data-v-ae24b3ad><div class="VPNavBar has-sidebar" data-v-ae24b3ad data-v-19c990f1><div class="wrapper" data-v-19c990f1><div class="container" data-v-19c990f1><div class="title" data-v-19c990f1><div class="VPNavBarTitle has-sidebar" data-v-19c990f1 data-v-8460f0a8><a class="title" href="/" data-v-8460f0a8><!--[--><!--]--><!----><!--[-->Forest&#39;s Blog<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-19c990f1><div class="content-body" data-v-19c990f1><!--[--><!--]--><div class="VPNavBarSearch search" data-v-19c990f1><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-19c990f1 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mds/%E5%85%B3%E4%BA%8E%E6%88%91.html" tabindex="0" data-v-7f418b0f data-v-42ef59de><!--[--><span data-v-42ef59de>关于我</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>前端</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>JS底层知识</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/JS%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/JS%E5%86%85%E5%AD%98%E6%9C%BA%E5%88%B6.html" data-v-43f1e123><!--[-->JS内存机制<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/JS%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/JS%E5%87%BD%E6%95%B0.html" data-v-43f1e123><!--[-->JS函数<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/JS%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/JavaScript%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" data-v-43f1e123><!--[-->JavaScript之数据类型<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>基础知识</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/CSS%E5%B8%B8%E8%A7%81%E6%A6%82%E5%BF%B5.html" data-v-43f1e123><!--[-->CSS常见概念<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/JavaScript%E6%80%BB%E7%BB%93.html" data-v-43f1e123><!--[-->JavaScript总结<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>工程化</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86.html" data-v-43f1e123><!--[-->Webpack核心原理<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>常用工具方法封装</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95%E5%B0%81%E8%A3%85/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD.html" data-v-43f1e123><!--[-->JS数据类型判断<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95%E5%B0%81%E8%A3%85/JS%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81.html" data-v-43f1e123><!--[-->JS防抖节流<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>网络通信</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%89%8D%E7%AB%AF/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" data-v-43f1e123><!--[-->网络通信基本概念<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>后端</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/K8s%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->K8s笔记<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/ShardingJDBC%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->ShardingJDBC分库分表mysql数据库实战笔记<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>专题秘籍</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link active" href="/mds/%E5%90%8E%E7%AB%AF/%E4%B8%93%E9%A2%98%E7%A7%98%E7%B1%8D/K8s%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->K8s笔记<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>内功心法</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/%E5%86%85%E5%8A%9F%E5%BF%83%E6%B3%95/%E6%9E%84%E6%9E%B6%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->构架笔记<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B5%81%E5%A4%84%E7%90%86%E5%B9%B3%E5%8F%B0Kafka%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->分布式流处理平台Kafka笔记<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>实战心得</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/%E5%AE%9E%E6%88%98%E5%BF%83%E5%BE%97/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E7%9F%AD%E9%93%BE%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->海量数据短链项目笔记<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>架构</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/%E6%9E%B6%E6%9E%84/%E6%9E%84%E6%9E%B6%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->构架笔记<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>项目</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/%E9%A1%B9%E7%9B%AE/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E7%9F%AD%E9%93%BE%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0.html" data-v-43f1e123><!--[-->海量数据短链项目笔记<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/mds/%E5%90%8E%E7%AB%AF/%E9%AB%98%E6%80%A7%E8%83%BDRabbitMQ%E5%AE%B9%E5%99%A8%E5%8C%96%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%9E%E6%88%98.html" data-v-43f1e123><!--[-->高性能RabbitMQ容器化分布式集群实战<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-9c007e85><span class="text" data-v-9c007e85><!----><span data-v-9c007e85>算法</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-9c007e85><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-43f1e123><a class="VPLink link" href="/mds/%E7%AE%97%E6%B3%95/%E7%AD%89%E5%BE%85%E8%AE%B0%E5%BD%95%E4%B8%AD.html" data-v-43f1e123><!--[-->等待记录中<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-19c990f1 data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-1736f215 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1736f215><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1736f215><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-19c990f1 data-v-d0bd9dde data-v-9c007e85><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9c007e85><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-9c007e85><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-9c007e85><div class="VPMenu" data-v-9c007e85 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-1736f215 data-v-b1685198><span class="check" data-v-b1685198><span class="icon" data-v-b1685198><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1736f215><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1736f215><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-19c990f1 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-19c990f1><div class="divider-line" data-v-19c990f1></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5a346dfe data-v-0282ae07><div class="container" data-v-0282ae07><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-0282ae07><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-0282ae07><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-0282ae07>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-0282ae07 data-v-af18c0d5><button data-v-af18c0d5>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5a346dfe data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-e31bd47b><!----><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%85%B3%E4%BA%8E%E6%88%91.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>关于我</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>前端</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>JS底层知识</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/JS%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/JS%E5%86%85%E5%AD%98%E6%9C%BA%E5%88%B6.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>JS内存机制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/JS%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/JS%E5%87%BD%E6%95%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>JS函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/JS%E5%BA%95%E5%B1%82%E7%9F%A5%E8%AF%86/JavaScript%E4%B9%8B%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>JavaScript之数据类型</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>基础知识</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/CSS%E5%B8%B8%E8%A7%81%E6%A6%82%E5%BF%B5.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>CSS常见概念</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/JavaScript%E6%80%BB%E7%BB%93.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>JavaScript总结</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>工程化</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>Webpack核心原理</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>常用工具方法封装</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95%E5%B0%81%E8%A3%85/JS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>JS数据类型判断</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E6%96%B9%E6%B3%95%E5%B0%81%E8%A3%85/JS%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>JS防抖节流</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>网络通信</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%89%8D%E7%AB%AF/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1/%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>网络通信基本概念</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 has-active" data-v-575e6a36 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>后端</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/K8s%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>K8s笔记</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/ShardingJDBC%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>ShardingJDBC分库分表mysql数据库实战笔记</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 has-active" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>专题秘籍</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/%E4%B8%93%E9%A2%98%E7%A7%98%E7%B1%8D/K8s%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>K8s笔记</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>内功心法</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/%E5%86%85%E5%8A%9F%E5%BF%83%E6%B3%95/%E6%9E%84%E6%9E%B6%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>构架笔记</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/%E5%88%86%E5%B8%83%E5%BC%8F%E6%B5%81%E5%A4%84%E7%90%86%E5%B9%B3%E5%8F%B0Kafka%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>分布式流处理平台Kafka笔记</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>实战心得</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/%E5%AE%9E%E6%88%98%E5%BF%83%E5%BE%97/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E7%9F%AD%E9%93%BE%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>海量数据短链项目笔记</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>架构</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/%E6%9E%B6%E6%9E%84/%E6%9E%84%E6%9E%B6%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>构架笔记</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-e31bd47b data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h3 class="text" data-v-e31bd47b>项目</h3><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-2 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/%E9%A1%B9%E7%9B%AE/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E7%9F%AD%E9%93%BE%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>海量数据短链项目笔记</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E5%90%8E%E7%AB%AF/%E9%AB%98%E6%80%A7%E8%83%BDRabbitMQ%E5%AE%B9%E5%99%A8%E5%8C%96%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E5%AE%9E%E6%88%98.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>高性能RabbitMQ容器化分布式集群实战</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0" data-v-575e6a36 data-v-e31bd47b><div class="item" role="button" tabindex="0" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><h2 class="text" data-v-e31bd47b>算法</h2><!----></div><div class="items" data-v-e31bd47b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e31bd47b data-v-e31bd47b><div class="item" data-v-e31bd47b><div class="indicator" data-v-e31bd47b></div><a class="VPLink link link" href="/mds/%E7%AE%97%E6%B3%95/%E7%AD%89%E5%BE%85%E8%AE%B0%E5%BD%95%E4%B8%AD.html" data-v-e31bd47b><!--[--><p class="text" data-v-e31bd47b>等待记录中</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5a346dfe data-v-669faec9><div class="VPDoc has-sidebar has-aside" data-v-669faec9 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-935f8a84><div class="content" data-v-935f8a84><div class="outline-marker" data-v-935f8a84></div><div class="outline-title" role="heading" aria-level="2" data-v-935f8a84>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-935f8a84><span class="visually-hidden" id="doc-outline-aria-label" data-v-935f8a84> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-935f8a84 data-v-b933a997><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _mds_%E5%90%8E%E7%AB%AF_%E4%B8%93%E9%A2%98%E7%A7%98%E7%B1%8D_K8s%E7%AC%94%E8%AE%B0" data-v-39a288b8><div><h1 id="容器编排k8s最佳实践kubernetes-rancher2-x笔记" tabindex="-1">容器编排k8s最佳实践kubernetes+Rancher2.x笔记 <a class="header-anchor" href="#容器编排k8s最佳实践kubernetes-rancher2-x笔记" aria-label="Permalink to &quot;容器编排k8s最佳实践kubernetes+Rancher2.x笔记&quot;">​</a></h1><h2 id="为什么要学习容器编排调度kubernetes" tabindex="-1">为什么要学习容器编排调度Kubernetes <a class="header-anchor" href="#为什么要学习容器编排调度kubernetes" aria-label="Permalink to &quot;为什么要学习容器编排调度Kubernetes&quot;">​</a></h2><ul><li>多数互联网公司里面用的技术，实现跨主机多容器编排调度管理的最佳技术之一</li><li>可以实现服务注册发现、DevOps自动部署和回滚，能够自动实现请求的负载均衡分配网络流量</li><li>在多数互联网公司中，Kubernetes占有率很高，是近几年大量流行</li><li>可以作为公司内部培训技术分享必备知识，超多案例+实战等</li></ul><h3 id="有谁在用-进一线大厂-国内大厂多数都有用" tabindex="-1">有谁在用，进一线大厂(国内大厂多数都有用) <a class="header-anchor" href="#有谁在用-进一线大厂-国内大厂多数都有用" aria-label="Permalink to &quot;有谁在用，进一线大厂(国内大厂多数都有用)&quot;">​</a></h3><ul><li>国内：阿里、字节、腾讯 、微信、网易、⻁牙、⻘云、新浪等</li><li>国外：谷歌、Facebook、亚⻢逊、苹果等</li></ul><h3 id="k8s文档-https-kubernetes-io-docs-home" tabindex="-1"><a href="https://kubernetes.io/docs/home/" target="_blank" rel="noreferrer">K8S文档：</a><a href="https://kubernetes.io/docs/home/" target="_blank" rel="noreferrer">https://kubernetes.io/docs/home/</a> <a class="header-anchor" href="#k8s文档-https-kubernetes-io-docs-home" aria-label="Permalink to &quot;[K8S文档：](https://kubernetes.io/docs/home/)[https://kubernetes.io/docs/home/](https://kubernetes.io/docs/home/)&quot;">​</a></h3><h2 id="互联网项目部署方式历史发展" tabindex="-1">互联网项目部署方式历史发展 <a class="header-anchor" href="#互联网项目部署方式历史发展" aria-label="Permalink to &quot;互联网项目部署方式历史发展&quot;">​</a></h2><h3 id="应用程序部署方式" tabindex="-1">应用程序部署方式 <a class="header-anchor" href="#应用程序部署方式" aria-label="Permalink to &quot;应用程序部署方式&quot;">​</a></h3><p><img src="/images/2c24c986115eb4a27a2cf8c34acd0fd1.png" alt=""></p><ul><li>传统部署时代 <ul><li>早期的时候，在物理服务器上运行应用程序</li><li>缺点 <ul><li>无法限制在物理服务器中运行的应用程序资源使用，会导致资源分配问题，过高或过低</li><li>部署多个物理机，维护许多物理服务器的成本很高。</li></ul></li></ul></li><li>虚拟化部署时代 <ul><li>虚拟化技术允许在单个物理服务器的 CPU 上运行多台虚拟机(VM)</li><li>虚拟化能使应用程序在不同 VM 之间被彼此隔离，且能提供一定程度的安全性</li><li>能够更好地利用物理服务器的资源，具有更高的可伸缩性，以及降低硬件成本等等的好处</li><li>缺点 <ul><li>需要单独一个系统，占用资源</li><li>不能灵活的扩容和缩容</li></ul></li></ul></li><li>容器部署时代 <ul><li>容器类似于 VM，但是更宽松的隔离特性，使容器之间可以共享操作系统(OS)</li><li>最熟悉的就是Docker容器化技术 <ul><li>一行命令可以部署任意一个 mysql、nginx、redis、RabbitMQ、Kakfa等热⻔中间件</li><li>docker命令可以操作当前机器上的1个容器</li><li>docker-compose可以操作当前机器上的多个容器</li><li>容器比起 VM 被认为是更轻量级的，每个容器都具有自己的文件系统、CPU、内存、进程空间等</li><li>跨云和操作系统发行版本的可移植性：可在 Ubuntu、CoreOS、CentOS、Google Kubernetes Engine 和其他任何地方运行</li></ul></li></ul></li></ul><h3 id="那docker容器化技术带来了哪些问题" tabindex="-1">那Docker容器化技术带来了哪些问题 <a class="header-anchor" href="#那docker容器化技术带来了哪些问题" aria-label="Permalink to &quot;那Docker容器化技术带来了哪些问题&quot;">​</a></h3><ul><li>10个物理机发布100个容器，怎么快速发布和管理</li><li>用户请求过来，怎么分配请求到100个容器里面</li><li>突发海量请求过来，如何根据情况进行快速扩容</li><li>应用发布上线出现问题，需要进行回滚历史版本，如何进行回滚</li><li>某个容器故障了，如何快速启动新容器去替代</li><li>......</li></ul><h3 id="上面容器管理的问题称为容器编排-为了解决这些问题-产生了一些容器编排的软件" tabindex="-1">上面容器管理的问题称为容器编排，为了解决这些问题，产生了一些容器编排的软件 <a class="header-anchor" href="#上面容器管理的问题称为容器编排-为了解决这些问题-产生了一些容器编排的软件" aria-label="Permalink to &quot;上面容器管理的问题称为容器编排，为了解决这些问题，产生了一些容器编排的软件&quot;">​</a></h3><ul><li>Docker Swarm：Docker自己的容器编排工具</li><li>Mesos：Apache的资源管控的工具，结合Marathon使用</li><li>Kubernetes：Google开源的的容器编排工具, 基于内部 Borg系统的开源版本</li></ul><h3 id="什么是kubernetes" tabindex="-1">什么是Kubernetes? <a class="header-anchor" href="#什么是kubernetes" aria-label="Permalink to &quot;什么是Kubernetes?&quot;">​</a></h3><ul><li>Kubernetes 这个名字源于希腊语，意为“舵手”或“⻜行员”</li><li>k8s 这个缩写是因为 k 和 s 之间有八个字符的关系。</li><li>Google 在 2014 年开源了 Kubernetes 项目。 Kubernetes建立在Google大规模运行生产工作负载十几年经验的基础上，结合了社区中最优秀的想法和实践。</li><li>Kubernetes是一个可移植、可扩展的开源平台，用于管理容器化的工作负载和服务，简称K8S</li><li><a href="https://kubernetes.io/zh-cn/docs/home/" target="_blank" rel="noreferrer">官方文档：</a><a href="https://kubernetes.io/zh-cn/docs/home/" target="_blank" rel="noreferrer">https://kubernetes.io/zh-cn/docs/home/</a></li></ul><h3 id="k8s概述" tabindex="-1">k8s概述 <a class="header-anchor" href="#k8s概述" aria-label="Permalink to &quot;k8s概述&quot;">​</a></h3><ul><li>K8S的本质是一组服务器集群，可以在对应服务器集群的每个节点上运行程序，来对节点中的容器进行管理</li><li>类似Master-Work方式，每个服务器上安装特定的k8s组件，就可以形成集群，然后部署对应的应用即可。</li></ul><h3 id="k8s常⻅的功能" tabindex="-1">k8s常⻅的功能 <a class="header-anchor" href="#k8s常⻅的功能" aria-label="Permalink to &quot;k8s常⻅的功能&quot;">​</a></h3><ul><li>服务发现和负载均衡 <ul><li>Kubernetes 可以使用 DNS 名称或自己的 IP 地址来暴露容器</li><li>如果进入容器的流量很大， Kubernetes 能够自动实现请求的负载均衡分配网络流量，从而使部署稳定</li></ul></li><li>存储编排 <ul><li>Kubernetes 允许自动挂载选择的存储系统，例如本地存储、云提供商存储等</li></ul></li><li>自动部署和回滚 <ul><li>可以用k8s自动化部署创建新容器，删除现有容器并将它们的所有资源用于新容器。</li><li>当版本发布错误，可以立刻回退到之前的版本</li></ul></li><li>自我修复 <ul><li>如果某个容器宕机了，K8S 可以快速重新启动新的的容器，替换旧的容器</li></ul></li><li>密钥与配置管理 <ul><li>K8S允许存储和管理敏感信息，例如密码、OAuth 令牌和 ssh 密钥</li></ul></li></ul><h3 id="kubernetes常⻅组件和整体架构" tabindex="-1">Kubernetes常⻅组件和整体架构 <a class="header-anchor" href="#kubernetes常⻅组件和整体架构" aria-label="Permalink to &quot;Kubernetes常⻅组件和整体架构&quot;">​</a></h3><ul><li>kubernetes常⻅概念 <ul><li>Master <ul><li>指的是集群控制节点(相当于整个集群的指挥中心)，在每个Kubernetes集群里都需要有一个Master来负责整个集群的管理和控制</li></ul></li><li>Node <ul><li>除了master，k8s集群中的其他机器被称为Node节点，Node节点才是kubernetes集群中的工作负载节点</li><li>每个Node节点都会被master分配一些工作负载(docker容器)，node节点上的docker负责容器的运行</li></ul></li><li>Pod <ul><li>Pod是一组容器, 在K8S中，最小的单位是Pod，一个Pod可以包含多个容器，但通常情况下我们在每个Pod中仅使用一个容器</li><li>可以把Pod理解成豌豆荚, Pod内的每个容器是一颗颗豌豆</li></ul></li></ul></li></ul><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/bc07266c-303b-41aa-b216-7f86a0f7b6b3/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/bc07266c-303b-41aa-b216-7f86a0f7b6b3/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 1.png)</p><pre><code>  -  分类 
     -  自主创建：直接创建出来的Pod，这种pod删除后就没有了，也不会自动重建 
     -  控制器创建：通过控制器创建的pod，这类Pod删除了之后还会自动重建 
</code></pre><ul><li>Pod Controller <ul><li>控制器是管理pod的中间层，只需要告诉Pod控制器，想要创建多少个什么样的Pod，它会创建出满足条件的Pod并确保每一个Pod资源处于用户期望的目标状态。如果Pod在运行中出现故障，它会基于指定策略重新编排Pod</li><li>通过它来实现对pod的管理，比如启动pod、停止pod、扩展pod的数量等等</li><li>类型 <ul><li>ReplicaSet、Deployment、Horizontal Pod Autoscaler、DaemonSet等</li></ul></li></ul></li><li>Service <ul><li>在k8s里面，每个Pod都会被分配一个单独的IP地址，但这个 IP地址会随着Pod的销毁而消失</li><li>Service (服务)就是用来解决这个问题的，对外服务的统一入口，用于为一组提供服务的Pod抽象一个稳定的网络访问地址</li><li>一个Service可以看作一组提供相同服务的Pod的对外访问接口，作用于哪些Pod是通过标签选择器来定义的</li></ul></li><li>Label <ul><li>K8S提供了一种机制来为Pod进行分类，那就是Label(标签)，同一类pod会拥有相同的标签</li><li>Label的具体形式是key-value的标记对，可以在创建资源的时候设置，也可以在后期添加和修改</li><li>给某个资源对象定义一个Label，就相当于给它打了一个标签，可以通过Label Selector(标签选择器)查询和筛选拥有某些Label的资源对象，K8S通过这种方式实现了类似 SQL的对象查询机制</li><li>应用场景 <ul><li>未使用前，分散难管理，如果需要部署不同版本的应用到不同的环境中，难操作</li></ul></li></ul></li></ul><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/f2e4ae2a-1a75-4197-8877-c2f8bd927a69/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/f2e4ae2a-1a75-4197-8877-c2f8bd927a69/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 2.png)</p><pre><code>     - 为Pod打上不同标签，使用Label组织的Pod，轻松管理
</code></pre><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/b5677daa-e74a-4bc6-95e6-949bb49cce9b/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/b5677daa-e74a-4bc6-95e6-949bb49cce9b/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 3.png)</p><ul><li>Label选择器 <ul><li>对应的资源打上标签后，可以使用标签选择器过滤指定的标签</li><li>标签选择器目前有两个 <ul><li>基于等值关系(等于、不等于)</li><li>基于集合关系(属于、不属于、存在)</li></ul></li></ul></li><li>NameSpace <ul><li>可以在一个物理集群上运行多个虚拟集群，这种虚拟集群被称作命名空间，用来隔离pod的运行环境</li><li>同一个名字空间中的资源名称必须唯一，而不同名字空间之间则没有这个要求</li><li>NameSpace是不能嵌套的，每一个 Kubernetes 的资源都只能在一个NameSpace内</li><li>名字空间是在多个用户之间划分集群资源的一种方法(通过资源配额)</li><li>不必使用多个名字空间来分隔轻微不同的资源，例如同一软件的不同版本：应该使用标签来区分同一名字空间中的不同资源</li><li>Kubernetes 会创建四个初始NameSpace名称空间 <ul><li>default <ul><li>没有指明使用其它名字空间的对象所使用的默认名字空间</li></ul></li><li>kube-system <ul><li>Kubernetes系统创建对象所使用的名字空间</li></ul></li><li>kube-public</li><li>kube-node-lease</li></ul></li></ul></li><li>应用分类 <ul><li>有状态应用 <ul><li>不能简单的实现负载均衡的服务，有数据产生的服务，Redis、MySql、RabbitMQ等</li><li>相关服务须通过一些较复杂的配置才能做到负载均衡</li><li>有状态的应用，建议直接在物理机部署，方便维护管理</li></ul></li><li>无状态应用 <ul><li>没有对应业务数据的应用，可以简单的实现负载均衡，复制一个节点即可快速扩容，如SpringCloud中的业务服务</li><li>无状态的应用适合部署在Kubernetes(K8s)中或者容器中</li></ul></li></ul></li><li>kubernetesK8S整体架构 ![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/4b9e8ff0-e8c9-4248-9edb-5effc365a6e4/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/4b9e8ff0-e8c9-4248-9edb-5effc365a6e4/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 4.png) <ul><li>也是Client-Server模型</li></ul></li></ul><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/be135f79-ec1d-4c55-bc92-10c5df25ac23/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/be135f79-ec1d-4c55-bc92-10c5df25ac23/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 5.png)</p><ul><li>控制节点Master-Node，负责集群的管理 (Master也可以多个，保证高可用) <ul><li>apiserver：提供操作【k8s集群资源】的唯一入口， RESTful方式请求,并提供认证、授权、访问控制、API注册和发现等</li><li>scheduler：负责资源的调度，按照预定的调度策略，【计 算】将Pod调度到相应的Node节点进行应用部署</li><li>controller-manager：控制器管理中心，负责维护集群的状态，比如故障检测、滚动更新等，根据调度器的安排通知对应的节点创建pod</li><li>etcd：存储中心，是兼具一致性和高可用性的键值数据库，可以作为保存 Kubernetes 所有集群数据的后台数据库</li></ul></li><li>工作节点Worker-Node，负责为集群提供运行环境 <ul><li>Worker-Node是Pod真正运行的主机，可以是物理机也可以是虚拟机，Node本质上不是K8S来创建的，K8S只是管理Node上的资源，为了管理Pod，每个Node节点上至少需要运行 container runtime(Docker)、kubelet和kube-proxy服务</li><li>kubelet：相当于主节点派到工作节点的一个代表，用于管理本机容器(相当于master节点的化身)，负责维护容器的生命周期也负责Volume(CVI)和网络(CNI)的管理</li><li>kube-proxy：负责为Service提供cluster内部的服务发现/网络代理/负载均衡等操作，为部署的应用程序提供访问入口，和apiserver是不一样的，后者是操作k8s集群内部的</li></ul></li></ul><h2 id="k8s常⻅集群架构和云服务器搭建实-战" tabindex="-1">K8S常⻅集群架构和云服务器搭建实 战 <a class="header-anchor" href="#k8s常⻅集群架构和云服务器搭建实-战" aria-label="Permalink to &quot;K8S常⻅集群架构和云服务器搭建实 战&quot;">​</a></h2><h3 id="k8s常⻅集群架构和搭建方式介绍" tabindex="-1">K8S常⻅集群架构和搭建方式介绍 <a class="header-anchor" href="#k8s常⻅集群架构和搭建方式介绍" aria-label="Permalink to &quot;K8S常⻅集群架构和搭建方式介绍&quot;">​</a></h3><ul><li>k8s集群类型有多种 <ul><li>单master-Node集群 <ul><li>一主多从，推荐测试环境</li></ul></li></ul></li></ul><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/6b285b54-db8d-465d-98eb-b3ed646fac4b/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/6b285b54-db8d-465d-98eb-b3ed646fac4b/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 6.png)</p><pre><code>  - 服务器要求：服务器要求至少2台2核4G以上的云服务器
</code></pre><ul><li>多master-Node集群 <ul><li>多主多从(高可用集群)，推荐生产环境使用</li></ul></li></ul><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/aa8a70bb-5425-44ef-85fe-103e2b04dc32/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/aa8a70bb-5425-44ef-85fe-103e2b04dc32/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 7.png)</p><pre><code>  - 服务器要求：服务器要求至少4台2核4G以上的云服务器
</code></pre><ul><li>单节点k8s集群 <ul><li>单一个节点</li><li>服务器要求：服务器要求至少一台2核4G以上的云服务器</li></ul></li><li>k8s搭建方式 <ul><li>kubeadm搭建(推荐) <ul><li>是一个K8s部署工具，提供kubeadm init和kubeadm join</li><li>用于快速搭建k8s集群，比较推荐</li></ul></li><li>二进制包搭建 <ul><li>从github下载发行版的二进制包，手动部署每个组件，组成Kubernetes集群</li><li>可以了解底层，但是步骤繁琐，坑比较多</li></ul></li><li>Minikube搭建 <ul><li>是一种轻量化的Kubernetes集群，是k8s社区为了帮助开发者和学习者能够更好学习和体验k8s功能而推出的，使用个人PC的虚拟化环境就快速构建启动单节点k8s</li></ul></li></ul></li><li>练习方案 <ul><li>方案一：Minikube搭建进行搭建，1台服务器</li><li>方案二：一主多从，共2台以上服务器</li><li>我选择的方案：阿里云Linux CentOS 7.8按量付费两台</li></ul></li></ul><h3 id="基于kubeadm搭建多节点k8s集群" tabindex="-1">基于KubeAdm搭建多节点K8S集群 <a class="header-anchor" href="#基于kubeadm搭建多节点k8s集群" aria-label="Permalink to &quot;基于KubeAdm搭建多节点K8S集群&quot;">​</a></h3><ul><li>安装 <ul><li>安装Docker(主节点+工作节点) <ul><li>先安装yml</li></ul></li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum-utils</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> device-mapper-persistent-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lvm2</span></span></code></pre></div><pre><code>  -  设置阿里云镜像 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum-config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --add-repo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.rep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">o</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><pre><code>  -  查看可安装的docker版本 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-ce</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --showduplicates</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sort</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span></span></code></pre></div><pre><code>  -  安装docker 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-ce-20.10.10-3.el7</span></span></code></pre></div><pre><code>  -  查看docker版本 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span></code></pre></div><pre><code>  -  配置开机自启动 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker.service</span></span></code></pre></div><pre><code>  -  启动docker 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span></code></pre></div><pre><code>  -  查看docker 启动状态 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span></code></pre></div><ul><li>配置镜像源(主节点+工作节点)</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/yum.repos.d/kubernetes.repo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[kubernetes]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">name=Kubernetes</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">enabled=1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gpgcheck=0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">repo_gpgcheck=0</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&lt;https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre></div><ul><li>安装kubelet kubeadm kubectl(主节点+工作节点)</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubelet-1.18.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubeadm-1.18.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubectl-1.18.0</span></span></code></pre></div><ul><li>主节点初始化(主节点) <ul><li>只修改两个地方(master主机【内网IP】，k8s软件版本)</li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubeadm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--apiserver-advertise-address=172.31.101.9 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--image-repository [registry.aliyuncs.com/google_containers](</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://registry.aliyuncs.com/google_containers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">--kubernetes-version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1.18.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--service-cidr=10.96.0.0/12 </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--pod-network-cidr=10.244.0.0/16</span></span></code></pre></div><pre><code>  -  说明 
     -  `-apiserver-advertise-address`：主节点的内网ip地址 
     -  `-image-repository` 镜像仓库 
     -  `-kubernetes-version` k8s版本 
     -  `-service-cidr` + `--pod-network-cidr` 网段不重复即可 
</code></pre><ul><li>当初始化完成之后执行命令，并加入工作节点 <ul><li>按照提示执行命令</li><li>主节点执行命令 <ul><li>加入工作节点</li><li>查看节点</li></ul></li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nodes</span></span></code></pre></div><pre><code>        - 状态都是NotReady，需要配置网络插件
     -  安装网络插件 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.ym</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">l</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><pre><code>     -  查看节点状态 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span></span></code></pre></div><pre><code>     -  查看系统pod状态 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pods</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kube-system</span></span></code></pre></div><h3 id="_5分钟基于k8s集群部署你的第一个k8s应用" tabindex="-1">5分钟基于K8S集群部署你的第一个K8S应用 <a class="header-anchor" href="#_5分钟基于k8s集群部署你的第一个k8s应用" aria-label="Permalink to &quot;5分钟基于K8S集群部署你的第一个K8S应用&quot;">​</a></h3><ul><li>查看k8s集群信息</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cluster-info</span></span></code></pre></div><ul><li>查看节点信息</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span></span></code></pre></div><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/212b3e1f-d797-4066-a08d-c1935431d925/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/212b3e1f-d797-4066-a08d-c1935431d925/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 8.png)</p><ul><li>查看内部组件</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -A</span></span></code></pre></div><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/af622fb2-c65e-450d-bfbe-5f8f0f081d01/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/af622fb2-c65e-450d-bfbe-5f8f0f081d01/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 9.png)</p><ul><li>部署第一个K8S应用-Nginx，并通过公网ip访问 <ul><li>创建deployment(Pod控制器的一种)</li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xdclass-nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --image=nginx:1.23.0</span></span></code></pre></div><ul><li>查看deployment和pod</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment,pod,svc</span></span></code></pre></div><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/4277b070-9c8d-4dff-a600-7c0ae5942d53/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/4277b070-9c8d-4dff-a600-7c0ae5942d53/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 10.png)</p><ul><li>暴露80端口，创建service</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> expose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xdclass-nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port=80</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --type=NodePort</span></span></code></pre></div><ul><li>查看端口映射</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod,svc</span></span></code></pre></div><p>![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/87b53b53-0207-47c2-bfd6-30639dafb961/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/87b53b53-0207-47c2-bfd6-30639dafb961/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 11.png)</p><ul><li>在浏览器访问, 工作节点开放端口31512，访问工作节点ip: 31512(网络安全组记得开放31512端口) <ul><li>master、node节点访问这个 开放的端口都可以</li></ul></li><li>注意 <ul><li>Kubeadm部署，暴露端口对外服务，会随机选端口，默认范围是30000~32767，可以修改指定 ![<a href="https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/d6549964-4928-48f5-a5e8-9b6245de2179/Untitled.png" target="_blank" rel="noreferrer">https://prod-files-secure.s3.us-west-2.amazonaws.com/48018283-2714-46c7-9db0-8578c93b2688/d6549964-4928-48f5-a5e8-9b6245de2179/Untitled.png</a>](K8s笔记+75d943eb-4fe1-4783-bb50-6784268e2a09/Untitled 12.png)</li></ul></li></ul><h2 id="kubernetes核心资源管理操作实战" tabindex="-1">Kubernetes核心资源管理操作实战 <a class="header-anchor" href="#kubernetes核心资源管理操作实战" aria-label="Permalink to &quot;Kubernetes核心资源管理操作实战&quot;">​</a></h2><h3 id="kubernetes常⻅资源管理命令介绍" tabindex="-1">Kubernetes常⻅资源管理命令介绍 <a class="header-anchor" href="#kubernetes常⻅资源管理命令介绍" aria-label="Permalink to &quot;Kubernetes常⻅资源管理命令介绍&quot;">​</a></h3><ul><li>概念 <ul><li>k8s是一个服务器集群系统，用户可以在集群中部署各种服务，也就是在k8s集群上运行一个个的容器</li><li>在k8s中，pod是最小的管理单元而非容器，一个pod中可以有多个容器</li><li>在k8s集群中，所有内容都可以被抽象为资源，通过操作资源来管理k8s集群</li></ul></li><li>使用kubectl来管理资源 <ul><li>kubectl用法</li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [command] [TYPE] [NAME] [flags]</span></span></code></pre></div><pre><code>  -  commad：对资源具体的操作，如create创建、get获取、delete删除 
  -  TYPE：指定资源类型，大小写敏感 
  -  NAME：指定资源的名称，大小写敏感，如果省略名称则 显示所有资源 
  -  flags：指定可选的参数，如可用-s或者-server指定Kubernetes API server的地址和端口 
</code></pre><ul><li>例子 <ul><li>获取全部节点</li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span></span></code></pre></div><pre><code>  -  获取全部pod 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod</span></span></code></pre></div><pre><code>  -  查看某个pod内容 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod_name</span></span></code></pre></div><pre><code>  -  获取全部名称空间 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ns</span></span></code></pre></div><pre><code>  -  查看创建的资源 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod,svc,deploy</span></span></code></pre></div><pre><code>  -  删除nginx pod，如果是靠deploy控制器创建的pod，直接删除则会自动创建新的 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> delete</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod名称</span></span></code></pre></div><pre><code>  -  提示：如果需要删除则直接删除depoly控制器即可，pod会被删除 
</code></pre><ul><li>资源管理方式 <ul><li>命令式对象管理：直接使用命令去操作资源</li></ul></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 资源名称</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --image=镜像名称</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port=端口号</span></span></code></pre></div><pre><code>     -  例子 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xdclass-nignx-pod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --image=nginx:1.23.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --port=80</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deployment</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xdclass-nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --image=nginx:1.23.0</span></span></code></pre></div><pre><code>  -  命令式对象配置：通过命令配置和配置文件去操作资源 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置文件名称.yaml</span></span></code></pre></div><pre><code>  -  声明式对象配置：通过apply和配置文件操作资源 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apply</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置文件名称.yaml</span></span></code></pre></div><pre><code>  -  yaml例子 
</code></pre><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/v1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Deployment</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-deployment</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   labels:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      app:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-deployment</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spec:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   replicas:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   selector:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      matchLabels:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         app:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-pod</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   template:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      metadata:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">           labels:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">              app:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-pod</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      spec:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         containers:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx:1.23.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             imagePullPolicy:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> IfNotPresent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             ports:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">             -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerPort:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">apiVersion:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kind:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pod</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">metadata:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spec:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  containers:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx:1.23.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pod</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ports:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-port</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      containerPort:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      protocol:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TCP</span></span></code></pre></div><pre><code>  -  kubectl create 和 kubectl apply的区别 
     -  kubectl create 命令首次执行时会创建资源，当再次执行的时候会报错，因为资源名称在同一命名空间内是唯一的 
     -  kubectl apply在首次执行的时候也会创建对应的资源，当再次执行的时候会根据配置文件进行升级、扩容等操作，即使配置文件没有变化也不影响 
</code></pre></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-48f9bb55><!--[--><!--]--><!----><nav class="prev-next" data-v-48f9bb55><div class="pager" data-v-48f9bb55><a class="VPLink link pager-link prev" href="/mds/%E5%90%8E%E7%AB%AF/ShardingJDBC%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E6%88%98%E7%AC%94%E8%AE%B0.html" data-v-48f9bb55><!--[--><span class="desc" data-v-48f9bb55>Previous page</span><span class="title" data-v-48f9bb55>ShardingJDBC分库分表mysql数据库实战笔记</span><!--]--></a></div><div class="pager" data-v-48f9bb55><a class="VPLink link pager-link next" href="/mds/%E5%90%8E%E7%AB%AF/%E5%86%85%E5%8A%9F%E5%BF%83%E6%B3%95/%E6%9E%84%E6%9E%B6%E7%AC%94%E8%AE%B0.html" data-v-48f9bb55><!--[--><span class="desc" data-v-48f9bb55>Next page</span><span class="title" data-v-48f9bb55>构架笔记</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5a346dfe data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad><a href="https://beian.miit.gov.cn/">蜀ICP备2023020990号-1</a> Copyright © 2019-present Forest</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"mds_关于我.md\":\"vlxZSAA2\",\"index.md\":\"VZ1DsKOc\",\"mds_前端_常用工具方法封装_js数据类型判断.md\":\"YjSlNsuW\",\"mds_前端_基础知识_css常见概念.md\":\"Dxm-WzS1\",\"mds_前端_js底层知识_js内存机制.md\":\"ajA5w-As\",\"mds_后端_shardingjdbc分库分表mysql数据库实战笔记.md\":\"yTCoaUpi\",\"mds_后端_k8s笔记.md\":\"FjTMZS3G\",\"mds_后端_高性能rabbitmq容器化分布式集群实战.md\":\"F044q-5i\",\"mds_前端_基础知识_javascript总结.md\":\"9_huBVYD\",\"mds_前端_网络通信_网络通信基本概念.md\":\"MfQFt8Rw\",\"mds_后端_内功心法_构架笔记.md\":\"fFFvpbU3\",\"mds_前端_工程化_webpack核心原理.md\":\"f-uPGeop\",\"mds_后端_分布式流处理平台kafka笔记.md\":\"2rOCAU6l\",\"mds_算法_等待记录中.md\":\"oQc2DszD\",\"mds_后端_专题秘籍_k8s笔记.md\":\"G39pp6BN\",\"mds_前端_js底层知识_js函数.md\":\"L7yjfKQR\",\"mds_后端_架构_构架笔记.md\":\"Za7756i8\",\"mds_前端_js底层知识_javascript之数据类型.md\":\"-xvx0yO0\",\"mds_后端_项目_海量数据短链项目笔记.md\":\"bZ6w0Vh2\",\"mds_前端_常用工具方法封装_js防抖节流.md\":\"cC3K1cyy\",\"mds_后端_实战心得_海量数据短链项目笔记.md\":\"tBhe3m6w\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Forest's Blog\",\"description\":\"个人技术知识库，记录和分享个人碎片化、结构化、体系化的技术知识内容\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"关于我\",\"link\":\"/mds/关于我\"},{\"text\":\"前端\",\"items\":[{\"text\":\"JS底层知识\",\"items\":[{\"text\":\"JS内存机制\",\"link\":\"/mds/前端/JS底层知识/JS内存机制\"},{\"text\":\"JS函数\",\"link\":\"/mds/前端/JS底层知识/JS函数\"},{\"text\":\"JavaScript之数据类型\",\"link\":\"/mds/前端/JS底层知识/JavaScript之数据类型\"}]},{\"text\":\"基础知识\",\"items\":[{\"text\":\"CSS常见概念\",\"link\":\"/mds/前端/基础知识/CSS常见概念\"},{\"text\":\"JavaScript总结\",\"link\":\"/mds/前端/基础知识/JavaScript总结\"}]},{\"text\":\"工程化\",\"items\":[{\"text\":\"Webpack核心原理\",\"link\":\"/mds/前端/工程化/Webpack核心原理\"}]},{\"text\":\"常用工具方法封装\",\"items\":[{\"text\":\"JS数据类型判断\",\"link\":\"/mds/前端/常用工具方法封装/JS数据类型判断\"},{\"text\":\"JS防抖节流\",\"link\":\"/mds/前端/常用工具方法封装/JS防抖节流\"}]},{\"text\":\"网络通信\",\"items\":[{\"text\":\"网络通信基本概念\",\"link\":\"/mds/前端/网络通信/网络通信基本概念\"}]}]},{\"text\":\"后端\",\"items\":[{\"text\":\"K8s笔记\",\"link\":\"/mds/后端/K8s笔记\"},{\"text\":\"ShardingJDBC分库分表mysql数据库实战笔记\",\"link\":\"/mds/后端/ShardingJDBC分库分表mysql数据库实战笔记\"},{\"text\":\"专题秘籍\",\"items\":[{\"text\":\"K8s笔记\",\"link\":\"/mds/后端/专题秘籍/K8s笔记\"}]},{\"text\":\"内功心法\",\"items\":[{\"text\":\"构架笔记\",\"link\":\"/mds/后端/内功心法/构架笔记\"}]},{\"text\":\"分布式流处理平台Kafka笔记\",\"link\":\"/mds/后端/分布式流处理平台Kafka笔记\"},{\"text\":\"实战心得\",\"items\":[{\"text\":\"海量数据短链项目笔记\",\"link\":\"/mds/后端/实战心得/海量数据短链项目笔记\"}]},{\"text\":\"架构\",\"items\":[{\"text\":\"构架笔记\",\"link\":\"/mds/后端/架构/构架笔记\"}]},{\"text\":\"项目\",\"items\":[{\"text\":\"海量数据短链项目笔记\",\"link\":\"/mds/后端/项目/海量数据短链项目笔记\"}]},{\"text\":\"高性能RabbitMQ容器化分布式集群实战\",\"link\":\"/mds/后端/高性能RabbitMQ容器化分布式集群实战\"}]},{\"text\":\"算法\",\"items\":[{\"text\":\"等待记录中\",\"link\":\"/mds/算法/等待记录中\"}]}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"<a href=\\\"https://beian.miit.gov.cn/\\\">蜀ICP备2023020990号-1</a> Copyright © 2019-present Forest\"},\"sidebar\":{\"/mds\":[{\"text\":\"关于我\",\"link\":\"/mds/关于我\"},{\"text\":\"前端\",\"items\":[{\"text\":\"JS底层知识\",\"items\":[{\"text\":\"JS内存机制\",\"link\":\"/mds/前端/JS底层知识/JS内存机制\"},{\"text\":\"JS函数\",\"link\":\"/mds/前端/JS底层知识/JS函数\"},{\"text\":\"JavaScript之数据类型\",\"link\":\"/mds/前端/JS底层知识/JavaScript之数据类型\"}]},{\"text\":\"基础知识\",\"items\":[{\"text\":\"CSS常见概念\",\"link\":\"/mds/前端/基础知识/CSS常见概念\"},{\"text\":\"JavaScript总结\",\"link\":\"/mds/前端/基础知识/JavaScript总结\"}]},{\"text\":\"工程化\",\"items\":[{\"text\":\"Webpack核心原理\",\"link\":\"/mds/前端/工程化/Webpack核心原理\"}]},{\"text\":\"常用工具方法封装\",\"items\":[{\"text\":\"JS数据类型判断\",\"link\":\"/mds/前端/常用工具方法封装/JS数据类型判断\"},{\"text\":\"JS防抖节流\",\"link\":\"/mds/前端/常用工具方法封装/JS防抖节流\"}]},{\"text\":\"网络通信\",\"items\":[{\"text\":\"网络通信基本概念\",\"link\":\"/mds/前端/网络通信/网络通信基本概念\"}]}]},{\"text\":\"后端\",\"items\":[{\"text\":\"K8s笔记\",\"link\":\"/mds/后端/K8s笔记\"},{\"text\":\"ShardingJDBC分库分表mysql数据库实战笔记\",\"link\":\"/mds/后端/ShardingJDBC分库分表mysql数据库实战笔记\"},{\"text\":\"专题秘籍\",\"items\":[{\"text\":\"K8s笔记\",\"link\":\"/mds/后端/专题秘籍/K8s笔记\"}]},{\"text\":\"内功心法\",\"items\":[{\"text\":\"构架笔记\",\"link\":\"/mds/后端/内功心法/构架笔记\"}]},{\"text\":\"分布式流处理平台Kafka笔记\",\"link\":\"/mds/后端/分布式流处理平台Kafka笔记\"},{\"text\":\"实战心得\",\"items\":[{\"text\":\"海量数据短链项目笔记\",\"link\":\"/mds/后端/实战心得/海量数据短链项目笔记\"}]},{\"text\":\"架构\",\"items\":[{\"text\":\"构架笔记\",\"link\":\"/mds/后端/架构/构架笔记\"}]},{\"text\":\"项目\",\"items\":[{\"text\":\"海量数据短链项目笔记\",\"link\":\"/mds/后端/项目/海量数据短链项目笔记\"}]},{\"text\":\"高性能RabbitMQ容器化分布式集群实战\",\"link\":\"/mds/后端/高性能RabbitMQ容器化分布式集群实战\"}]},{\"text\":\"算法\",\"items\":[{\"text\":\"等待记录中\",\"link\":\"/mds/算法/等待记录中\"}]}]},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>